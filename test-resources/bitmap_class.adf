.setorder LITTLE_ENDIAN
.setencoding UTF-16LE

.group(BITMAPFILE) {
	.group(BITMAPFILEHEADER) {
		short	bfType
		int		bfSize
		short	bfReserved1
		short	bfReserved2
		int		bfOffBits
	}
	
	.group(BITMAPINFOHEADER) {
		int		biSize
		int		biWidth
		int		biHeight
		short	biPlanes
		short	biBitCount
		int		biCompression
		int		biSizeImage
		int		biXPelsPerMeter
		int		biYPelsPerMeter
		int		biClrUsed
		int		biClrImportant
	}
	

	.if(biBitCount >= 24){  #each colour is specified
		.repeat(biHeight){
			.mark(rowStart)
			.repeat(biWidth){
				.group(PIXELDATA){
					ubyte rgbBlue
					ubyte rgbGreen
					ubyte rgbRed
				}
			}

			#Each row is zero padded to a multiple of 4
			.skip (&rgbRed-&rowStart-1) % 4
		}
	}
}
END
